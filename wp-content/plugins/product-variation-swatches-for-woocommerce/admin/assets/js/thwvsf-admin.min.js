function thwvsOpenFormTab(elm,tab_id,form_type){thwvsf_base.openFormTab(elm,tab_id,form_type)}function thwvsf_upload_icon_image(elm,e){thwvsf_settings.upload_icon_image(elm,e)}function thwvsf_remove_icon_image(elm,e){thwvsf_settings.remove_icon_image(elm,e)}function thwvsf_change_term_type(elm,e){thwvsf_settings.change_term_type(elm,e)}function thwvsf_open_body(elm,e){thwvsf_settings.open_term_body(elm,e)}var thwvsf_base=function($,window,document){"use strict";function escapeHTML(html){var fn=function(tag){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;"}[tag]||tag};return html.replace(/[&<>"]/g,fn)}function isHtmlIdValid(id){return/^[a-z\_]+[a-z0-9\_]*$/.test(id.trim())}function isValidHexColor(value){return!!preg_match("/^#[a-f0-9]{6}$/i",value)}function setup_tiptip_tooltips(){var tiptip_args={attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200};$(".tips").tipTip(tiptip_args)}function setup_color_picker(form){var i=0;form.find(".thpladmin-colorpick").iris({change:function(event,ui){$(this).parent().find(".thpladmin-colorpickpreview").css({backgroundColor:ui.color.toString()})},hide:!0,border:!0}).click(function(){$(this).closest(".thwvsf_settings_fields_form").length>0?($(".iris-picker").hide(),$(this).closest(".thwvsf_settings_fields_form").find(".iris-picker").show()):($(".iris-picker").hide(),$(this).closest("td").find(".iris-picker").show())}),$("body").click(function(){$(".iris-picker").hide()}),$(".thpladmin-colorpick").click(function(event){event.stopPropagation()}),i++}function setup_popup_tabs(form,selector_prefix){$("."+selector_prefix+"-tabs-menu a").click(function(event){event.preventDefault(),$(this).parent().addClass("current"),$(this).parent().siblings().removeClass("current");var tab=$(this).attr("href");$("."+selector_prefix+"-tab-content").not(tab).css("display","none"),$(tab).fadeIn()})}function open_form_tab(elm,tab_id,form_type){var tabs_container=$("#thwvsf-tabs-container_"+form_type);$(elm).parent().addClass("current"),$(elm).parent().siblings().removeClass("current");var tab=$("#"+tab_id+"_"+form_type);tabs_container.find(".thpladmin-tab-content").not(tab).css("display","none"),$(tab).fadeIn()}function get_property_field_value(form,type,name){var value="";switch(type){case"select":value=form.find("select[name=i_"+name+"]").val(),value=null==value?"":value;break;case"checkbox":value=form.find("input[name=i_"+name+"]").prop("checked"),value=value?1:0;break;default:value=form.find("input[name=i_"+name+"]").val(),value=null==value?"":value}return value}function set_property_field_value(form,type,name,value,multiple){switch(type){case"select":1==multiple&&"string"==typeof value&&(value=value.split(","),name+="[]"),form.find('select[name="i_'+name+'"]').val(value);break;case"checkbox":value=1==value,form.find("input[name=i_"+name+"]").prop("checked",value);break;case"colorpicker":form.find("input[name=i_"+name+"]").val(value),form.find("span."+name+"_preview").css("background-color",value);break;default:form.find("input[name=i_"+name+"]").val(value)}}return{escapeHTML:escapeHTML,isHtmlIdValid:isHtmlIdValid,isValidHexColor:isValidHexColor,setup_tiptip_tooltips:setup_tiptip_tooltips,setupColorPicker:setup_color_picker,setupPopupTabs:setup_popup_tabs,openFormTab:open_form_tab,get_property_field_value:get_property_field_value,set_property_field_value:set_property_field_value}}(window.jQuery,window,document),thwvsf_settings=function($,window,document){"use strict";function initialise_tab_switch(tabs_wrapper){var tabs=tabs_wrapper.find("#thwvsadmin-tabs"),tab_panels=tabs_wrapper.find("#thwvsadmin-tab-panels");tabs.find("li.thwvsadmin-tab a").on("click",function(){switch_settings_tab($(this).data("tab"),$(this),tabs,tab_panels)}),tabs.find("li.thwvsadmin-tab:first-child").find("a").trigger("click")}function switch_settings_tab(tab_number,tab,tabs,tab_panels){tab||(tab=tabs.find("#tab-"+tab)),tabs.find("li a").removeClass("active");var active_tab_panel=tab_panels.find("#thwvsadmin-tab-panel-"+tab_number);tab.hasClass("active")||tab.addClass("active"),tab_panels.find("div.thwvsadmin-tab-panel").not("#thwvsadmin-tab-panel-"+tab_number).hide(),active_tab_panel.show()}function upload_icon_image(elm,e){mediaUploader=wp.media.frames.file_frame=wp.media({title:"Choose Image",button:{text:"Choose Image"},multiple:!1});var $image_div=$(elm).parents(".thwvsf-upload-image"),$index_media_image=$image_div.find(".i_index_media_img"),$index_media=$image_div.find(".i_index_media"),$remove_button=$image_div.find(".thwvsf_remove_image_button");mediaUploader.on("select",function(){var attachment=mediaUploader.state().get("selection").first().toJSON();$index_media_image.attr("src",attachment.url),$index_media.val(attachment.id),$(".thwvsf_remove_uploaded").show(),$remove_button.show()}),mediaUploader.open()}function remove_icon_image(elm,e){var $image_div=$(elm).parents(".thwvsf-upload-image"),$index_media_image=$image_div.find(".i_index_media_img"),$index_media=$image_div.find(".i_index_media"),$remove_button=$image_div.find(".thwvsf_remove_image_button");return $index_media_image.attr("src",placeholder),$index_media.val(""),$remove_button.hide(),!1}function change_term_type(elm,e){var type=$(elm).val(),form=$(elm).closest(".thwvsf_custom_attribute"),custom_attr_div=$(".thwvsf-custom-table");thwvsf_base.setupColorPicker(custom_attr_div),"select"==type?form.find($(".thwvsf-custom-table")).hide():(form.find($(".thwvsf-custom-table")).hide(),form.find($(".thwvsf-custom-table-"+type)).show(),form.find($(".th-tooltip-row")).show()),"select"==type?form.find($(".th-tooltip-row")).hide():form.find($(".th-tooltip-row")).show()}function open_term_body(elm,e){var term_name=$(elm).data("term_name"),parent=$(elm).closest("table");$(elm).hasClass("open")?($(elm).removeClass("open"),parent.find(".thwvsf-local-body-"+term_name).hide()):(parent.find(".thwvsf-local-body").hide(),parent.find(".thwvsf-local-body-"+term_name).show("slow"),parent.find(".thwvsf-local-head").removeClass("open"),$(elm).addClass("open"))}var mediaUploader;$(function(){var settings_div=$("#edittag"),add_tag_div=$("#addtag"),advanced_settings_div=$("#advanced_settings_form"),custom_attr_div=$(".thwvsf-custom-table");thwvsf_base.setupColorPicker(advanced_settings_div),thwvsf_base.setupColorPicker(settings_div),thwvsf_base.setupColorPicker(add_tag_div),thwvsf_base.setupColorPicker(custom_attr_div),initialise_tab_switch($("#thwvsadmin_wrapper"))});var placeholder=thwvsf_var.placeholder_image;return $(document).ajaxComplete(function(event,request,options){if(request&&4===request.readyState&&200===request.status&&options.data&&0<=options.data.indexOf("action=add-tag")){var res=wpAjax.parseAjaxResponse(request.responseXML,"ajax-response");if(!res||res.errors)return;return $(".i_index_media_img").attr("src",placeholder),$("#product_cat_thumbnail_id").val(""),$(".thwvsf_remove_image_button").hide(),void $(".thwvsf_settings_fields_form").find(".thpladmin-colorpickpreview").css("background-color","")}if(request&&4===request.readyState&&200===request.status&&options.data&&0<=options.data.indexOf("action=woocommerce_save_attributes")){var this_page=window.location.toString();this_page=this_page.replace("post-new.php?","post.php?post="+woocommerce_admin_meta_boxes.post_id+"&action=edit&");$(".thwvs-custom-table");$("#product_custom_variations").load(this_page+" #custom_variations_inner",function(){$("#product_custom_variations").trigger("reload"),thwvsf_base.setupColorPicker($(".th-custom-attr-color-td"))})}}),{upload_icon_image:upload_icon_image,remove_icon_image:remove_icon_image,change_term_type:change_term_type,open_term_body:open_term_body}}(window.jQuery,window,document);jQuery(function($){"use strict";function save_new_term($wrapper,$dialog,attribute){var new_attribute_name="",term_spec={};if(new_attribute_name=$dialog.find('input[name = "attribute_name"]').val(),term_spec["product_"+attribute]=$dialog.find('input[name = "attribute_type"]').val(),new_attribute_name){var ajax_data=_extends({action:"woocommerce_add_new_attribute",taxonomy:attribute,term:new_attribute_name,security:woocommerce_admin_meta_boxes.add_attribute_nonce},term_spec);$.post(woocommerce_admin_meta_boxes.ajax_url,ajax_data,function(response){response.error?window.alert(response.error):response.slug&&($wrapper.find("select.attribute_values").append('<option value="'+response.term_id+'" selected="selected">'+response.name+"</option>"),$wrapper.find("select.attribute_values").change()),$(".product_attributes").unblock()})}else $(".product_attributes").unblock()}var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};$(".product_attributes").on("click","button.thwvsf_add_new_attribute",function(event){event.preventDefault(),$(".thwvsf-class").val("");var placeholder=thwvsf_var.placeholder_image;$(".i_index_media_img").attr("src",placeholder),$(".thpladmin-colorpickpreview").css("background-color","");var popup_outer=$(".thwvsf-attribte-dialog");if(popup_outer.find("input[type=text]").val(""),popup_outer.hasClass("thwvsf-attribte-dialog-image")){popup_outer.find(".thwvsf_remove_image_button").hide()}var $wrapper=$(this).closest(".woocommerce_attribute"),attribute=$wrapper.data("taxonomy"),type=($(this).data("attr_taxonomy"),$(this).data("attr_type")),settings_div=$(".thwvsf_settings_fields_form");thwvsf_base.setupColorPicker(settings_div);var $popup_div=$(".thwvsf-attribte-dialog-"+type),height="color"==type?395:250;$popup_div.length>0&&($popup_div.dialog({dialogClass:"wp-dialog thwvsf-popup",title:"Add new term",modal:!0,autoOpen:!1,width:500,minHeight:height,buttons:[{text:"save",class:"button_class",click:function(){save_new_term($wrapper,$(this),attribute),$(this).dialog("close")}}]}),$(".product_attributes").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),$popup_div.dialog("open"),$(".product_attributes").unblock(),$(".ui-dialog.thwvsf-popup").css("z-index",99999999))})});