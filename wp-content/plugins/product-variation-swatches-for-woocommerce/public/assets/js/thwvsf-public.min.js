var thwvsf_public_base=function($,window,document){"use strict";function display_char_count(elm,isCount){var fid=elm.prop("id"),len=elm.val().length,displayElm=$("#"+fid+"-char-count");if(isCount)displayElm.text("("+len+" characters)");else{var maxLen=elm.prop("maxlength"),left=maxLen-len;displayElm.text("("+left+" characters left)"),rem<0&&displayElm.css("color","red")}}function set_field_value_by_elm(elm,type,value){switch(type){case"radio":elm.val([value]);break;case"checkbox":1==elm.data("multiple")?(value=value||[],elm.val([value])):(console.log(value),elm.val([value]));break;case"select":elm.prop("multiple")?elm.val(value):elm.val([value]);break;case"country":case"state":elm.val([value]).change();break;case"multiselect":elm.prop("multiple")?void 0!==value&&elm.val(value.split(",")).change():elm.val([value]);break;default:elm.val(value)}}function get_field_value(type,elm,name){var value="";switch(type){case"radio":value=$("input[type=radio][name="+name+"]:checked").val();break;case"checkbox":if(1==elm.data("multiple")){var valueArr=[];$("input[type=checkbox][name='"+name+"[]']:checked").each(function(){valueArr.push($(this).val())}),value=valueArr}else value=$("input[type=checkbox][name="+name+"]:checked").val();break;case"select":case"multiselect":default:value=elm.val()}return value}return{display_char_count:display_char_count,set_field_value_by_elm:set_field_value_by_elm,get_field_value:get_field_value}}(window.jQuery,window,document);!function($){"use strict";function initialize_thwvs(){function active_and_deactive_variation(form){var $attributeFields=form.$attributeFields;form.$form.find(".woocommerce-variation-add-to-cart");$attributeFields.each(function(index,el){var current_attr_select=$(el),current_attr_name=current_attr_select.data("attribute_name")||current_attr_select.attr("name");form.$form.find("."+current_attr_name).addClass("deactive"),current_attr_select.children("option").each(function(i,option){var opt_val=option.value;""!=opt_val&&form.$form.find("."+current_attr_name+"."+opt_val).removeClass("deactive")})})}function disable_out_of_stock_variation(form){var attributeFields=form.$attributeFields;if(1==attributeFields.length)for(var variations=form.variationData,i=0;i<variations.length;i++){var variation=variations[i],variation_attributes=variation.attributes,attribute_key=Object.keys(variation_attributes),attr_item_name=attribute_key[0],attr_item_name_class=attr_item_name.replace(/[^a-z0-9_-]/gi,""),attribute_value=variation_attributes[attr_item_name],attribute_value_class=attribute_value.replace(/[^a-z0-9_-]/gi,""),is_in_stock=variation.is_in_stock,attr_option_class="";attr_option_class=attr_item_name_class?"."+attr_item_name_class+"."+attribute_value_class:"."+attr_item_name+'[data-value="'+attribute_value+'"]',is_in_stock||"default"==out_of_stock?form.$form.find(attr_option_class).removeClass("out_of_stock"):(form.$form.find(attr_option_class).addClass("out_of_stock"),form.$form.find(attr_option_class).trigger("out_of_stock",[is_in_stock,attr_item_name]))}else disable_out_of_stock_variation_multiple(form,attributeFields)}function disable_out_of_stock_variation_multiple(form,attributeFields){var total_attributes=attributeFields.length,count=0,selected_terms=[],selected_term_names=[];attributeFields.each(function(index,element){var current_attr_select=$(this),current_attr_name=current_attr_select.data("attribute_name")||current_attr_select.attr("name"),selected_attribute_val=current_attr_select.val();""!=selected_attribute_val&&(count=++count,selected_terms[current_attr_name]=selected_attribute_val,selected_term_names[count]=current_attr_name)}),(0==count||count<total_attributes-1)&&$(".thwvsf_fields .thwvsf-checkbox").removeClass("out_of_stock");var variations=form.variationData;if(count==total_attributes-1)for(var i=0;i<variations.length;i++){var variation=variations[i],variation_attributes=variation.attributes,q=0;$.each(variation_attributes,function(attr_item_name,attribute_value){if(variation_attributes[attr_item_name]==selected_terms[attr_item_name]&&++q==total_attributes-1){var current_variation=variation,current_attributes=current_variation.attributes;for(var current_attr_name in current_attributes)if(-1==jQuery.inArray(current_attr_name,selected_term_names)){var current_attr_val=variation_attributes[current_attr_name],attr_item_name_class=current_attr_name.replace(/[^a-z0-9_-]/gi,""),attribute_value_class=current_attr_val.replace(/[^a-z0-9_-]/gi,""),attr_option_class="";attr_option_class=attribute_value_class?"."+attr_item_name_class+"."+attribute_value_class:"."+attr_item_name_class+'[data-value="'+attribute_value+'"]';var is_in_stock=variation.is_in_stock;is_in_stock||"default"==out_of_stock?form.$form.find(attr_option_class).removeClass("out_of_stock"):(form.$form.find(attr_option_class).addClass("out_of_stock"),form.$form.find(attr_option_class).trigger("out_of_stock",[is_in_stock,attr_item_name]))}}})}}var clear_on_reselect=(thwvsf_public_var.enable_stock_alert,thwvsf_public_var.min_value_stock,thwvsf_public_var.clear_on_reselect),out_of_stock=thwvsf_public_var.out_of_stock,swatches_form=function($form){var self=this;self.$form=$form,this.variationData=$form.data("product_variations"),this.$attributeFields=$form.find(".variations select"),self.$singleVariation=$form.find(".single_variation"),self.$singleVariationWrap=$form.find(".single_variation_wrap"),$form.on("click.thwvsf_variation_form",".thwvsf-checkbox",{swatches_form:this},this.onselect),$form.on("check_variations.thwvsf_variation_form",{swatches_form:this},this.onFindVariation),$form.on("click.thwvsf_variation_form",".reset_variations",{swatches_form:this},this.onReset)};swatches_form.prototype.onReset=function(event){var form=event.data.swatches_form;$(".thwvsf_fields .thwvsf-checkbox").removeClass("thwvsf-selected"),$(".thwvsf_fields > span").removeClass("selected"),$(".thwvsf_fields .thwvsf-checkbox").removeClass("deactive"),$(".thwvsf_fields .thwvsf-checkbox").removeClass("out_of_stock"),$(".thwvsf-rad").attr("checked",!1),$(".thwvsf-rad-li > label").removeClass("thwvsf-selected");var $element=$(this);$element.parents(".variations_form").siblings(".thwvsf_add_to_cart_button");active_and_deactive_variation(form),disable_out_of_stock_variation(form)},swatches_form.prototype.onselect=function(event){var form=event.data.swatches_form,$element=$(this),$select=$element.closest(".thwvsf_fields").find("select"),attribute_name=$select.data("attribute_name")||$select.attr("name"),value=$element.data("value");if(selected.push(attribute_name),!$select.find('option[value="'+value+'"]').length)return $element.siblings(".thwvsf-checkbox").removeClass("thwvsf-selected"),$select.val("").change(),alert("No combination"),!1;if($element.hasClass("thwvsf-selected")){if("yes"!=clear_on_reselect)return!1;$select.val(""),$element.removeClass("thwvsf-selected")}else $element.addClass("thwvsf-selected").siblings(".thwvsf-selected").removeClass("thwvsf-selected"),$select.val(value);$select.change(),$("BODY.post-type-archive").length,active_and_deactive_variation(form),disable_out_of_stock_variation(form)},swatches_form.prototype.onselectradio=function(event){var $element=(event.data.swatches_form,$(this)),$select=$element.closest(".thwvsf_fields").find("select"),attribute_name=$select.data("attribute_name")||$select.attr("name"),value=$element.data("value");clicked=attribute_name,selected.push(attribute_name),$select.val(value),$select.change()},$.fn.wc_set_variation_attr=function(attr,value){void 0===this.attr("data-o_"+attr)&&this.attr("data-o_"+attr,this.attr(attr)?this.attr(attr):""),!1===value?this.removeAttr(attr):this.attr(attr,value)},swatches_form.prototype.onFindVariation=function(event){var form=event.data.swatches_form;form.$attributeFields;active_and_deactive_variation(form),disable_out_of_stock_variation(form)},$.fn.thwvsf_variation_form=function(){return new swatches_form(this),this},$(function(){"undefined"!=typeof wc_add_to_cart_variation_params&&$(".variations_form").each(function(){$(this).thwvsf_variation_form()})});var clicked=null,selected=[]}initialize_thwvs(),"flatsome"==thwvsf_public_var.is_quick_view?$(document).on("mfpOpen",function(){initialize_thwvs()}):"yith"==thwvsf_public_var.is_quick_view&&$(document).on("qv_loader_stop",function(){initialize_thwvs()})}(jQuery);